/**
 * @version $Id: jquery.djmobilemenu.js 57 2016-06-30 15:25:17Z szymon $
 * @package DJ-MegaMenu
 * @copyright Copyright (C) 2013 DJ-Extensions.com, All rights reserved.
 * @license DJ-Extensions.com Proprietary Use License
 * @author url: http://dj-extensions.com
 * @author email contact@dj-extensions.com
 * @developer Szymon Woronowski - szymon.woronowski@design-joomla.eu
 */
!function(n){var o=function(o,a){var i=n('<select id="'+o.attr("id")+'select" class="inputbox dj-select" />').on("change",function(){n(this).val&&(window.location=n(this).val())}),t=o.find("li.dj-up");e(t,i,0),i.appendTo(a),a.find(".dj-mobile-open-btn").on("click",function(n){n.stopPropagation(),n.preventDefault();var o=i[0];if(document.createEvent){var e=document.createEvent("MouseEvents");e.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(e)}else o.fireEvent&&o.fireEvent("onmousedown")})},e=function(o,a,i){for(var t="",d=!1,s=0;i>s;s++)t+="- ";o.each(function(){var o=n(this),s=o.find("> a").first(),c=o.find("> .dj-subwrap > .dj-subwrap-in > .dj-subcol > .dj-submenu > li, > .dj-subtree > li");if(s.length){var l="",f=s.find("img").first();f.length?l=t+f.attr("alt"):(l=s.html().replace(/(<small[^<]+<\/small>)/gi,""),l=t+l.replace(/(<([^>]+)>)/gi,""));var r=n('<option value="'+s.prop("href")+'">'+l+"</option>").appendTo(a);s.prop("href")||r.prop("disabled",!0),o.hasClass("active")&&(a.val(r.val()),d=!0)}c&&e(c,a,i+1)}),i||d||(n('<option value="">- MENU -</option>').prependTo(a),a.val(""))},a=function(o){o.find("ul.dj-mobile-nav > li, ul.dj-mobile-nav-child > li").each(function(){var o=n(this),e=o.find("> a").first();if(e.length){var a=o.find("> ul.dj-mobile-nav-child > li:not(:empty)");a.length||(o.removeClass("parent"),o.find("ul.dj-mobile-nav-child").remove()),o.hasClass("parent")&&(e.append('<span class="toggler"></span>'),e.on("click",function(e){o.hasClass("active")?n(e.target).hasClass("toggler")&&(e.preventDefault(),e.stopPropagation(),o.removeClass("active")):e.preventDefault()})),e.on("focus",function(){setTimeout(function(){e.parents(".dj-mobileitem").click()},50)})}o.on("click",function(){o.siblings().removeClass("active"),o.addClass("active")})})},i=function(o){var e=n(document.body).children(),i=n('<div class="dj-offcanvas-wrapper" />'),t=n('<div class="dj-offcanvas-pusher" />'),d=n('<div class="dj-offcanvas-pusher-in" />'),s=o.find(".dj-offcanvas").first(),c=s.data("effect");n(document.body).addClass("dj-offcanvas-effect-"+c);var l=null;o.find(".dj-mobile-open-btn").on("click",function(o){o.stopPropagation(),o.preventDefault(),clearTimeout(l),s.data("scroll",n(window).scrollTop()),n(document.body).addClass("dj-offcanvas-anim"),setTimeout(function(){n(document.body).addClass("dj-offcanvas-open")},50),d.css("top",-s.data("scroll")),s.find(".dj-offcanvas-close-btn").focus()}),n(document.body).prepend(i),3==c||6==c||7==c||8==c||14==c?t.append(s):i.append(s),i.append(t),t.append(d),d.append(e),s.find(".dj-offcanvas-close-btn").on("click",function(e){e.stopPropagation(),e.preventDefault(),n(document.body).hasClass("dj-offcanvas-open")&&(n(document.body).removeClass("dj-offcanvas-open"),l=setTimeout(function(){d.css("top",0),n(document.body).removeClass("dj-offcanvas-anim"),n(window).scrollTop(s.data("scroll")),o.find(".dj-mobile-open-btn").focus()},500))}),n(".dj-offcanvas-pusher").on("click",function(o){n(o.target).parents(".dj-offcanvas").length||s.find(".dj-offcanvas-close-btn").click()}),s.find(".dj-offcanvas-close-btn").on("keydown",function(n){9==n.which&&setTimeout(function(){s.find(":focus").length||s.find(".dj-offcanvas-close-btn").click()},50)}),s.find(".dj-offcanvas-end").on("focus",function(){s.find(".dj-offcanvas-close-btn").click()}),a(s)},t=function(o){o.find(".dj-mobile-open-btn").on("click",function(n){n.stopPropagation(),n.preventDefault(),o.find(".dj-accordion-in").slideToggle("fast")}),n(document).on("click",function(e){n(e.target).closest(".dj-accordion-in").length||o.find(".dj-accordion-in").is(":visible")&&o.find(".dj-accordion-in").slideUp("fast")}),a(o)},d=null;n(window).resize(function(){window.clearTimeout(d),d=window.setTimeout(function(){n("body").css("overflow","hidden");var o=n(window).innerWidth();n("body").css("overflow","");var e=!1;n(".dj-megamenu").each(function(){var a=n(this),i=n("#"+a.prop("id")+"mobile");i.length&&(o<=a.data("trigger")?(e=!0,n(document.body).addClass(a.prop("id")+"-mobile")):n(document.body).removeClass(a.prop("id")+"-mobile"))}),e?n(document.body).addClass("dj-megamenu-mobile"):n(document.body).removeClass("dj-megamenu-mobile")},100)}),n(document).ready(function(){n(".dj-megamenu").each(function(){var o=n(this),e=n("#"+o.prop("id")+"mobile"),a=n("#"+o.prop("id")+"mobileWrap");a.length&&a.append(e),e.length&&(e.find(".dj-hideitem").remove(),e.hasClass("dj-megamenu-offcanvas")?i(e):e.hasClass("dj-megamenu-accordion")&&t(e))}),n(window).trigger("resize")}),n(window).one("load",function(){n(".dj-megamenu").each(function(){var e=n(this),a=n("#"+e.prop("id")+"mobile");a.length&&a.hasClass("dj-megamenu-select")&&o(e,a)}),n(".dj-offcanvas-close-btn").click()})}(jQuery);